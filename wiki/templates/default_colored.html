<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="%root_path%%css%">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="%root_path%%rss%">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css" />
    <title>%title%</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> 
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <meta http-equiv="Content-Type" content="text/html; charset=%encoding%">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- PDF.js Viewer CSS -->
    <style>
        body {
            background-image: url('../Images/parchment.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            margin: 0;
            font-family: Arial, sans-serif;
            padding: 3cm;
        }

        #content {
            color: #333;
            font-size: 20px;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.5);
        }

        /* PDF Container Styles */
        .pdf-container {
            width: 100%;
            height: 70vh;
            min-height: 500px;
            margin: 20px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
        }

        .pdf-mobile-fallback {
            display: none;
            text-align: center;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 4px;
            margin: 20px 0;
        }

        /* Responsive adjustments */
        @media only screen and (max-width: 600px) {
            body {
                padding: 1cm;
            }
            #content {
                padding: 10px;
                max-width: 100%;
            }
            .pdf-container {
                height: 60vh;
                min-height: 300px;
            }
            /* Show fallback on mobile */
            .pdf-mobile-fallback {
                display: block;
            }
            .pdf-desktop-viewer {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div id="content">
        %content%
        
        <!-- This script will replace PDF links with embedded viewers -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Find all PDF links and replace them with viewers
                const pdfLinks = document.querySelectorAll('a[href$=".pdf"]');
                
                pdfLinks.forEach(link => {
                    const pdfUrl = link.href;
                    const container = document.createElement('div');
                    container.className = 'pdf-container';
                    
                    // Desktop viewer (iframe)
                    const iframe = document.createElement('iframe');
                    iframe.className = 'pdf-desktop-viewer';
                    iframe.src = pdfUrl;
                    iframe.width = '100%';
                    iframe.height = '100%';
                    iframe.style.border = 'none';
                    
                    // Mobile fallback
                    const fallback = document.createElement('div');
                    fallback.className = 'pdf-mobile-fallback';
                    fallback.innerHTML = `
                        <p>For better PDF viewing on mobile:</p>
                        <a href="${pdfUrl}" target="_blank">Open PDF in new tab</a>
                        <p>or</p>
                        <a href="https://docs.google.com/viewer?url=${encodeURIComponent(pdfUrl)}" target="_blank">
                            View with Google Docs Viewer
                        </a>
                    `;
                    
                    container.appendChild(iframe);
                    container.appendChild(fallback);
                    
                    // Replace link with the viewer
                    link.parentNode.replaceChild(container, link);
                });
            });
        </script>
    </div>
    
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
    <script type="text/javascript">
        document.querySelectorAll('pre').forEach(block => hljs.highlightBlock(block));
    </script>
</body>
</html>
